generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

type MailsReceivers {
  mail String
  name String
}

type InviteReceivers {
  mail       String
  name       String
  identifier String
  rejected   Boolean
}

model invites {
  id        String            @id @default(auto()) @map("_id") @db.ObjectId
  created   DateTime          @default(now()) @db.Date
  mailId    String            @unique
  receivers InviteReceivers[]
}

model mails {
  id         String           @id @default(auto()) @map("_id") @db.ObjectId
  date       DateTime         @default(now()) @db.Date
  invite     Boolean
  message    String
  receivers  MailsReceivers[]
  sender     String
  subject    String
  activityId String
}

model recipients {
  id     String   @id @default(auto()) @map("_id") @db.ObjectId
  mail   String
  name   String
  synced Boolean?

  @@unique([mail, name])
}

model sessions {
  id      String   @id @map("_id")
  expires DateTime @db.Date
  session String
}

enum department {
  Pfadi
  Woelfe @map("WÃ¶lfe")
  Biber
  Pio
  Leiter
}

model Activity {
  id               String      @id @default(auto()) @map("_id") @db.ObjectId
  title            String
  date             DateTime // vorher String
  start_time       String // Uhrzeit bleibt String
  end_time         String
  goal             String
  location         String
  responsible      String
  department       department?
  material         String[]
  needs_SiKo       Boolean
  SiKo             Bytes?
  bad_weather_info String?

  // Relations one to many
  programs Program[]
  flyer    Flyer?
}

model Program {
  id          String @id @default(auto()) @map("_id") @db.ObjectId
  time        String
  title       String
  description String
  responsible String

  // Relation
  activityId String   @db.ObjectId
  activity   Activity @relation(fields: [activityId], references: [id])
}

model Flyer {
  id              String   @id @default(auto()) @map("_id") @db.ObjectId
  title           String
  subtitle        String
  description     String
  items_to_take   String[]
  meeting_point   String
  sender          String
  is_registration Boolean
  deadline_at     DateTime // vorher String
  sufix           String
  are_mails_send  Boolean

  // Relation (one-to-one)
  activityId String   @unique @db.ObjectId
  activity   Activity @relation(fields: [activityId], references: [id])
}
